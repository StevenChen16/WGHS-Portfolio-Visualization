<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>美股投资组合表格</title>
    <style>
        body {
            font-family: Arial, sans-serif;
        }
        table {
            width: 80%;
            margin: 20px auto;
            border-collapse: collapse;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        th, td {
            border: 1px solid #dddddd;
            padding: 12px 15px;
            text-align: left;
        }
        th {
            background-color: #f2f2f2;
        }
        tr:nth-child(even) {
            background-color: #f9f9f9;
        }
    </style>
</head>
<body>
    <h2>美股投资组合详情</h2>
    <table id="stockTable">
        <tr>
            <th>市场</th>
            <th>资产总额</th>
            <th>现金</th>
            <th>市场价值</th>
            <th>投资本金</th>
            <th>累计金额</th>
            <th>累计盈亏率</th>
            <th>日浮动金额</th>
            <th>日浮动率</th>
        </tr>
        <!-- 美股总体数据将被动态插入这里 -->
        <tr>
            <th>股票代码</th>
            <th>股票名称</th>
            <th>持股数</th>
            <th>当前价格</th>
            <th>市场价值</th>
            <th>浮动金额</th>
            <th>浮动率 (%)</th>
            <th>日盈亏金额</th>
            <th>日盈亏率 (%)</th>
        </tr>
    </table>

    <script>
        fetch('performances.json')
        .then(response => response.json())
        .then(data => {
            const usMarket = data.result_data.performances.find(market => market.market === 'US');
            const usStocks = usMarket.list;
            const table = document.getElementById('stockTable');

            // 插入美股总体数据
            const overallRow = table.insertRow(1); // 在第二行插入
            const overallData = [
                '美股',
                `$${usMarket.assets}`,
                `$${usMarket.cash}`,
                `$${usMarket.market_value}`,
                `$${usMarket.principal}`,
                `$${usMarket.accum_amount}`,
                `${(usMarket.accum_rate * 100).toFixed(2)}%`,
                `$${usMarket.day_float_amount}`,
                `${(usMarket.day_float_rate * 100).toFixed(2)}%`
            ];
            overallData.forEach(text => {
                const cell = overallRow.insertCell(-1);
                cell.textContent = text;
            });

            // 插入每个股票的数据
            usStocks.forEach(stock => {
                const row = table.insertRow(-1);
                const cells = [
                    stock.symbol, 
                    stock.name, 
                    stock.shares, 
                    `$${stock.current}`, 
                    `$${stock.market_value.toFixed(2)}`, 
                    `$${stock.float_amount.toFixed(2)}`, 
                    `${(stock.float_rate * 100).toFixed(2)}%`,
                    `$${stock.day_float_amount.toFixed(2)}`,
                    `${(stock.day_float_rate * 100).toFixed(2)}%`
                ];
                cells.forEach(text => {
                    const cell = row.insertCell(-1);
                    cell.textContent = text;
                });
            });
        })
        .catch(error => console.error('Error loading the JSON file:', error));
    </script>
</body>
</html>
